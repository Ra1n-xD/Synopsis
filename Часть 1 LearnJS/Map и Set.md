# Map и Set это cложные структуры данных в JS:
-   Объекты для хранения именованных коллекций.
-   Массивы для хранения упорядоченных коллекций.

Перебор `Map` и `Set` всегда осуществляется в порядке добавления элементов, так что нельзя сказать, что это – неупорядоченные коллекции, но поменять порядок элементов или получить элемент напрямую по его номеру нельзя.
## `Map` – коллекция пар ключ-значение с ключями любого типа.

### Методы и свойства:
-   `new Map([iterable])` – создаёт коллекцию, можно указать перебираемый объект (обычно массив) из пар `[ключ,значение]` для инициализации.
-   `map.set(key, value)` – записывает по ключу `key` значение `value`.
-   `map.get(key)` – возвращает значение по ключу или `undefined`, если ключ `key` отсутствует.
-   `map.has(key)` – возвращает `true`, если ключ `key` присутствует в коллекции, иначе `false`.
-   `map.delete(key)` – удаляет элемент по ключу `key`.
-   `map.clear()` – очищает коллекцию от всех элементов.
-   `map.size` – возвращает текущее количество элементов.

### Отличия от обычного объекта `Object`:
-   Что угодно может быть ключом, в том числе и объекты.
-   Есть дополнительные методы, свойство `size`.
```js
//Пример отличий ключей в Map и Объектах
let objKey = {
    test: 'test',
    hui: '12sm'
};

let map = new Map();
map.set(objKey, '123');

const obj = {};
obj[objKey] = '123';
  
console.log(obj); // { '[object Object]': '123' }
console.log(map); // Map(1) { { name: 'test' } => '123' }
```
- `map[key]` - плохой способ использования т.к ключи становятся типа string
```js
//Сравнение заполенние Map через set и []
let map = new Map();

map.set(1, 2);
map[1] = 2;
map.set([1, 2, 3], 2);
map[[1, 2, 3]] = 2;

console.log(map); // Map(2) { 1 => 2, '1': 2, [ 1, 2, 3 ] => 2, '1,2,3': 2 }
```

### Перебор Map
Для перебора коллекции `Map` есть 3 метода:
-   `map.keys()` – возвращает итерируемый объект по ключам,
-   `map.values()` – возвращает итерируемый объект по значениям,
-   `map.entries()` – возвращает итерируемый объект по парам вида `[ключ, значение]`, этот вариант используется по умолчанию в `for..of`.
```js
let recipeMap = new Map([
    ['огурец', 500],
    ['помидор', 350],
    ['лук', 50]
]);
// перебор по ключам (овощи)
for (let vegetable of recipeMap.keys()) {
    alert(vegetable); // огурец, помидор, лук
}
// перебор по значениям (числа)
for (let amount of recipeMap.values()) {
    alert(amount); // 500, 350, 50
}
// перебор по элементам в формате [ключ, значение]
for (let entry of recipeMap) {
    // то же самое, что и recipeMap.entries()
    alert(entry); // огурец,500 (и так далее)
}
```
`Map` имеет встроенный метод `forEach`, схожий со встроенным методом массивов `Array`:
```js
map.forEach((value, key, map) => { 
	console.log(`${key}: ${value}`); // false: 'test' и так далее 
});
```

### Преобразование Map в Объект и наоборот
```js
//Из Объекта в Map
const obj = {
    'test': 123,
    'sosu': 'bibu',
};
console.log(new Map(Object.entries(obj))); //Map(2) { 'test' => 123, 'sosu' => 'bibu' }

//Из Map в Объект
let map = new Map([
    [[false, 'sosi', 123], 'test'],
    [1, 2],
    [{}, {}]
]);
console.log(Object.fromEntries(map)); // { '1': 2, 'false,sosi,123': 'test', '[object Object]': {} }
```

## `Set` – это особый вид коллекции: «множество» значений (без ключей), где каждое значение может появляться только один раз

**Методы и свойства:**
-   `new Set([iterable])` – создаёт `Set`, можно указать перебираемый объект со значениями для инициализации.
-   `set.add(value)` – добавляет значение (если оно уже есть, то ничего не делает), возвращает тот же объект `set`.
-   `set.delete(value)` – удаляет значение, возвращает `true` если `value` было в множестве на момент вызова, иначе `false`.
-   `set.has(value)` – возвращает `true`, если значение присутствует в множестве, иначе `false`.
-   `set.clear()` – удаляет все имеющиеся значения.
-   `set.size` – возвращает количество элементов в множестве.

При повторных вызовах `set.add()` с одним и тем же значением ничего не происходит, за счёт этого как раз и получается, что каждое значение появляется один раз.

### Перебор Set
`Set` имеет те же встроенные методы, что и `Map`:
-   `set.values()` – возвращает перебираемый объект для значений,
-   `set.keys()` – то же самое, что и `set.values()`, присутствует для обратной совместимости с `Map`,
-   `set.entries()` – возвращает перебираемый объект для пар вида `[значение, значение]`, присутствует для обратной совместимости с `Map`.
- Заметим забавную вещь. Функция в `forEach` у `Set` имеет 3 аргумента: значение `value`, потом _снова то же самое значение_ `valueAgain`, и только потом целевой объект. Для обратной совместимости с `Map`.
```js
let set = new Set(['1', false, {a: 1}, [], [], '1',]);
for (let value of set) console.log(value);

set.forEach((alue, valueAgain, set) => {
    console.log(alue, valueAgain, set);
});
```